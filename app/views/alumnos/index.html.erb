<h1 class="text-center">Alumnos</h1>
<!---<p>Find me in app/views/alumnos/index.html.erb</p>--->
<%case current_user.tipo %>
<%when 1 %>
    <h2 class="text-center">ALUMNOS CON ERRORES EN DATA WAREHOUSE</h2>
    <table style="width:100%", class= "table table-striped table-bordered table-sm">
        <tr>
            <th>Id</th>
            <th>No. Control</th> 
            <th>Nombre</th> 
            <th>Curp</th> 
            <th>Teléfono</th>
            <th>Fecha Nac.</th> 
            <th>E-mail</th>
            <th>Créditos</th>
            <th>Prom.</th>
            <th>Peso</th>
            <th>Estado</th>
            <th>Opciones</th>
        </tr>
        <% @alumnosData.each do |alumno| %>
            <%if alumno.errorNombre || alumno.errorCurp || alumno.errorPeso|| alumno.errorTelefono || alumno.errorCreditos || alumno.errorCorreo || alumno.errorPromedio %>
                <tr>
                    <th><%= alumno.Id_Alumno %></th>
                    <th><%= alumno.No_control %></th> 
                    <%if alumno.errorNombre %>
                        <th class ='alert-danger'><%= alumno.Nombre %></th>
                    <%else%>
                        <th><%= alumno.Nombre %></th>
                    <%end%>
                    <%if alumno.errorCurp %>
                        <th class ='alert-danger'><%= alumno.Curp %></th> 
                    <%else%>
                        <th><%= alumno.Curp %></th> 
                    <%end%>
                    <%if alumno.base.match('e')%> 
                        <%if alumno.errorTelefono%>
                            <th class ='alert-danger'><%= alumno.telefono_extra %></th>
                        <%else%>
                            <th><%= alumno.telefono_extra %></th>
                        <%end%>
                    <%end%> 
                    <%if alumno.base=="c"%>
                        <%if alumno.errorTelefono%>
                            <th class ='alert-danger'><%= alumno.Telefono %></th>
                        <%else%>
                            <th><%= alumno.Telefono %></th>
                        <%end%>
                    <%end%>
                    <th><%= alumno.Fecha_nac %></th>
                    <%if alumno.errorCorreo %>
                        <th class ='alert-danger'><%= alumno.CorreoElec %></th>
                    <%else%>
                        <th><%= alumno.CorreoElec %></th>
                    <%end%>
                    <%if alumno.errorCreditos %>
                        <th class ='alert-danger'><%= alumno.Cre_acum %></th>
                    <%else%>
                        <th><%= alumno.Cre_acum %></th>
                    <%end%>
                    <%if alumno.errorPromedio %>
                        <th class ='alert-danger'><%= alumno.Promedio_G %></th>
                    <%else%>
                        <th><%= alumno.Promedio_G %></th>
                    <%end%>
                    <%if alumno.errorPeso%>
                        <th class ='alert-danger'><%= alumno.Peso %></th>
                    <%else%>
                        <th><%= alumno.Peso %></th>
                    <%end%>
                    <th><%= alumno.Estado %></th>
                    <th><%= link_to "Editar", edit_alumno_path(id: alumno.Id_Alumno)%> 
                    <%= link_to "Eliminar", alumno_url(id: alumno.Id_Alumno), method: :delete, data: { confirm: "¿Desea eliminar a #{alumno.Nombre}?"}%></th>
                </tr>
            <%end%>
        <%end%>
    </table>
<%when 2 %>
<h2 class="text-center">ALUMNOS CON ERRORES EN CONTROL ACADÉMICO</h2>
<table style="width:100%", class= "table table-striped table-bordered table-sm">
    <tr>
        <th>Id</th>
        <th>No. Control</th> 
        <th>Nombre</th> 
        <th>Curp</th> 
        <th>Teléfono</th>
        <th>Fecha Nac.</th> 
        <th>E-mail</th>
        <th>Créditos</th>
        <th>Prom.</th>
        <th>Estado</th>
        <th>Opciones</th>
    </tr>
        <% @alumnosData.each do |alumno| %>
            <%if alumno.errorNombre == 1 || alumno.errorCurp == 1 || alumno.errorTelefono == 1|| alumno.errorCorreo == 1 || alumno.errorCreditos == 1|| alumno.errorPromedio == 1 %>
                <tr>
                    <th><%= alumno.Id_Alumno %></th>
                    <th><%= alumno.No_control %></th> 
                    <%if alumno.errorNombre == 1%>
                        <th class ='alert-danger'><%= alumno.Nombre %></th>
                    <%else%>
                        <th><%= alumno.Nombre %></th>
                    <%end%>
                    <%if alumno.errorCurp%>
                        <th class ='alert-danger'><%= alumno.Curp %></th> 
                    <%else%>
                        <th><%= alumno.Curp %></th> 
                    <%end%>
                    <%if alumno.errorTelefono == 1 %> 
                        <th class ='alert-danger'><%= alumno.Telefono %></th>
                    <%else%>
                        <th><%= alumno.Telefono %></th>
                    <%end%>
                    <th><%= alumno.Fecha_nac %></th>
                    <%if alumno.errorCorreo == 1%>
                        <th class ='alert-danger'><%= alumno.CorreoElec %></th>
                    <%else%>
                        <th><%= alumno.CorreoElec %></th>
                    <%end%>
                    <%if alumno.errorCreditos %>
                        <th class ='alert-danger'><%= alumno.Cre_acum %></th>
                    <%else%>
                        <th><%= alumno.Cre_acum %></th>
                    <%end%>
                    <%if alumno.errorPromedio %>
                        <th class ='alert-danger'><%= alumno.Promedio_G %></th>
                    <%else%>
                        <th><%= alumno.Promedio_G %></th>
                    <%end%>
                    <th><%= alumno.Estado %></th>
                    <th><%= link_to "Editar", edit_alumno_path(id: alumno.Id_Alumno)%> 
                    <%= link_to "Eliminar", alumno, method: :delete, data: { confirm: "¿Desea eliminar a #{alumno.Nombre}?"}%></th>
                </tr>
            <%end%>
        <%end%>
</table>
<%when 3 %>
<h2 class="text-center">ALUMNOS CON ERRORES EN EXTRAESCOLAES</h2>
<table style="width:100%", class= "table table-striped table-bordered table-sm">
        <tr>
            <th>Id</th>
            <th>No. Control</th>
            <th>Nombre</th> 
            <th>Id Carr.</th> 
            <th>Teléfono</th>
            <th>E-mail</th> 
            <th>Peso</th>
            <th>Estatura</th>
            <th>Opciones</th>
        </tr>
        <% @alumnosData.each do |alumno| %>
            <%if alumno.errorNombre == 2 || alumno.errorPeso ==2 || alumno.errorTelefono == 2 || alumno.errorCorreo == 2 %>
                <tr>
                    <th><%= alumno.Id_Alumno %></th>
                    <th><%= alumno.No_control %></th> 
                    <%if alumno.base.match('c')%>
                        <%if alumno.errorNombre %>
                            <th class ='alert-danger'><%= alumno.Nombre %></th>
                        <%else%>
                            <th><%= alumno.Nombre %></th>
                        <%end%>
                    <%else%>
                        <th><%= alumno.Nombre %></th>
                    <%end%>
                    <th><%= alumno.Id_Carrera %></th> 
                    <%if alumno.errorTelefono == 2%>
                        <th class ='alert-danger'><%= alumno.telefono_extra %></th>
                    <%else%>
                        <th><%= alumno.telefono_extra %></th>
                    <%end%>
                     <%if alumno.base.match('c')%>
                        <%if alumno.errorCorreo %>
                            <th class ='alert-danger'><%= alumno.CorreoElec %></th>
                        <%else%>
                            <th><%= alumno.CorreoElec %></th>
                        <%end%>
                    <%else%>
                        <th><%= alumno.CorreoElec %></th>
                    <%end%>                    
                    <%if alumno.errorPeso%>
                        <th class ='alert-danger'><%= alumno.Peso %></th>
                    <%else%>
                        <th><%= alumno.Peso %></th>
                    <%end%>
                    <th><%= alumno.Estatura %></th>
                    <th><%= link_to "Editar", edit_alumno_path(id: alumno.Id_Alumno)%> 
                    <%= link_to "Eliminar", alumno, method: :delete, data: { confirm: "¿Desea eliminar a #{alumno.Nombre}?"}%></th>
                </tr>
            <%end%>
        <%end%>
</table> 
<%end%>
<div class="text-center">
    <%= link_to "Eliminar todo", eliminar_alumnos_path, data: { confirm: "Desea eliminar todos los registros de alumnos?" }, class: 'btn btn-primary btn-lg' %>
    <%= link_to "Regresar" , show_tables_path, method: :get , class: 'btn btn-primary btn-lg'%>
 </div>