<h1 class="text-center">Alumnos</h1>
<!---<p>Find me in app/views/alumnos/index.html.erb</p>--->
<%case current_user.tipo %>
<%when 1 %>
    <h2 class="text-center">ERRORES EN DATA WAREHOUSE</h2>
    <table style="width:100%", class= "table table-striped table-bordered table-sm">
        <tr>
            <th>Id</th>
            <th>No. Control</th> 
            <th>Nombre</th> 
            <th>Curp</th> 
            <th>Id Carr.</th> 
            <th>Teléfono</th>
            <th>Fecha Nac.</th> 
            <th>Fecha Ing.</th>
            <th>Estado</th>
            <th>Fecha Egr.</th>
            <th>Prom.</th>
            <th>Peso</th>
            <th>Estatura</th>
            <th>Opciones</th>
        </tr>
        <% @alumnosData.each do |alumno| %>
            <%if alumno.errorNombre || alumno.errorCurp || alumno.errorPeso|| alumno.errorTelefono %>
                <tr>
                    <th><%= alumno.Id_Alumno %></th>
                    <th><%= alumno.No_control %></th> 
                    <%if alumno.errorNombre %>
                        <th class ='alert alert-danger'><%= alumno.Nombre %></th>
                    <%else%>
                        <th><%= alumno.Nombre %></th>
                    <%end%>
                    <%if alumno.errorCurp %>
                        <th class ='alert alert-danger'><%= alumno.Curp %></th> 
                    <%else%>
                        <th><%= alumno.Curp %></th> 
                    <%end%>
                    <th><%= alumno.Id_Carrera %></th>
                    <%if alumno.base.match('e')%> 
                        <%if alumno.errorTelefono%>
                            <th class ='alert alert-danger'><%= alumno.telefono_extra %></th>
                        <%else%>
                            <th><%= alumno.telefono_extra %></th>
                        <%end%>
                    <%end%> 
                    <%if alumno.base=="c"%>
                        <%if alumno.errorTelefono%>
                            <th class ='alert alert-danger'><%= alumno.Telefono %></th>
                        <%else%>
                            <th><%= alumno.Telefono %></th>
                        <%end%>
                    <%end%>
                    <th><%= alumno.Fecha_nac %></th>
                    <th><%= alumno.Fec_ingreso %></th>
                    <th><%= alumno.Estado %></th>
                    <th><%= alumno.Fec_egreso %></th>
                    <th><%= alumno.Promedio_G %></th>
                    <%if alumno.errorPeso%>
                        <th class ='alert alert-danger'><%= alumno.Peso %></th>
                    <%else%>
                        <th><%= alumno.Peso %></th>
                    <%end%>
                    <th><%= alumno.Estatura %></th>
                    <th><%= link_to "Editar", edit_alumno_path(id: alumno.Id_Alumno)%> 
                    <%= link_to "Eliminar", alumno, method: :delete, data: { confirm: "¿Desea eliminar a #{alumno.Nombre}?"}%></th>
                </tr>
            <%end%>
        <%end%>
    </table>
<%when 2 %>
<h2 class="text-center">ALUMNOS CON ERROR EN CONTROL ACADÉMICO</h2>
<table style="width:100%", class= "table table-striped table-bordered table-sm">
    <tr>
        <th>Id</th>
        <th>No. Control</th> 
        <th>Nombre</th> 
        <th>Curp</th> 
            <th>Id Carr.</th> 
            <th>Teléfono</th>
            <th>Fecha Nac.</th> 
            <th>Fecha Ing.</th>
            <th>Estado</th>
            <th>Fecha Egr.</th>
            <th>Prom.</th>
            <th>Opciones</th>
    </tr>
        <% @alumnosData.each do |alumno| %>
            <%if (alumno.errorNombre || alumno.errorCurp || alumno.errorTelefono == 1) && alumno.base.match('c') %>
                <tr>
                    <th><%= alumno.Id_Alumno %></th>
                    <th><%= alumno.No_control %></th> 
                    <%if alumno.errorNombre%>
                        <th class ='alert alert-danger'><%= alumno.Nombre %></th>
                    <%else%>
                        <th><%= alumno.Nombre %></th>
                    <%end%>
                    <%if alumno.errorCurp%>
                        <th class ='alert alert-danger'><%= alumno.Curp %></th> 
                    <%else%>
                        <th><%= alumno.Curp %></th> 
                    <%end%>
                    <th><%= alumno.Id_Carrera %></th> 
                    <%if alumno.errorTelefono == 1 %> 
                        <th class ='alert alert-danger'><%= alumno.Telefono %></th>
                    <%else%>
                        <th><%= alumno.Telefono %></th>
                    <%end%>
                    <th><%= alumno.Fecha_nac %></th>
                    <th><%= alumno.Fec_ingreso %></th>
                    <th><%= alumno.Estado %></th>
                    <th><%= alumno.Fec_egreso %></th>
                    <th><%= alumno.Promedio_G %></th>
                    <th><%= link_to "Editar", edit_alumno_path(id: alumno.Id_Alumno)%> 
                    <%= link_to "Eliminar", alumno, method: :delete, data: { confirm: "¿Desea eliminar a #{alumno.Nombre}?"}%></th>
                </tr>
            <%end%>
        <%end%>
</table>
<%when 3 %>
<h2 class="text-center">ALUMNOS CON ERROR EN EXTRAESCOLAES</h2>
<table style="width:100%", class= "table table-striped table-bordered table-sm">
        <tr>
            <th>Id</th>
            <th>No. Control</th> 
            <th>Id Carr.</th> 
            <th>Teléfono</th>
            <th>Fecha Nac.</th> 
            <th>Fecha Ing.</th>
            <th>Peso</th>
            <th>Estatura</th>
            <th>Opciones</th>
        </tr>
        <% @alumnosData.each do |alumno| %>
            <%if (alumno.errorNombre || alumno.errorCurp || alumno.errorPeso|| alumno.errorTelefono == 2 ) && alumno.base.match('e')%>
                <tr>
                    <th><%= alumno.Id_Alumno %></th>
                    <th><%= alumno.No_control %></th> 
                    <th><%= alumno.Id_Carrera %></th> 
                    <%if alumno.errorTelefono %>
                        <th class ='alert alert-danger'><%= alumno.telefono_extra %></th>
                    <%else%>
                        <th><%= alumno.telefono_extra %></th>
                    <%end%>
                    <th><%= alumno.Fecha_nac %></th>
                    <th><%= alumno.Fec_ingreso %></th>
                    <%if alumno.errorPeso%>
                        <th class ='alert alert-danger'><%= alumno.Peso %></th>
                    <%else%>
                        <th><%= alumno.Peso %></th>
                    <%end%>
                    <th><%= alumno.Estatura %></th>
                    <th><%= link_to "Editar", edit_alumno_path(id: alumno.Id_Alumno)%> 
                    <%= link_to "Eliminar", alumno, method: :delete, data: { confirm: "¿Desea eliminar a #{alumno.Nombre}?"}%></th>
                </tr>
            <%end%>
        <%end%>
</table> 
<%end%>
<%if @errores %>
    <div class="text-center">
        <%= link_to "CONTINUAR" ,'', data: { confirm: "Hijole, no puedes continuar si no has quitado los errores :(" }, class: 'btn btn-primary btn-lg' %>
    </div>
<%else%>
    <div class="text-center">
        <%= link_to "CONTINUAR" , carrera_index_path, method: :get , class: 'btn btn-primary btn-lg'%>
    </div>
<%end%>